---
title: Математические основы CRDT
---

Отсутствие конфликтов в CRDT доказывается формально. Для этого необходимо и достаточно гарантировать монотонность состояний, отношение частного порядка на множестве состояний и наличие операции объединения. С точки зрения математики такая система является полурешеткой.

*Полурешетка* - это полугруппа, частично упорядоченное множество (над частью элементов задано отношение "следует за") с бинарной операцией со следующими свойствами:

- операция идемпотентна: 
<math>
    <mi>s</mi>
    <mo>&times;</mo>
    <mi>s</mi>
    <mo>=</mo>
    <mi>s</mi>
</math>
- операция коммутативна: 
<math>
    <msub>
        <mi>s</mi>
        <mi>1</mi>
    </msub>
    <mo>&times;</mo>
    <msub>
        <mi>s</mi>
        <mi>2</mi>
    </msub>
    <mo>=</mo>
    <msub>
        <mi>s</mi>
        <mi>2</mi>
    </msub>
    <mo>&times;</mo>
    <msub>
        <mi>s</mi>
        <mi>1</mi>
    </msub>
</math>
- операция ассоциативна:
<math>
    <mo>(</mo>
    <msub>
        <mi>s</mi>
        <mi>1</mi>
    </msub>
    <mo>&times;</mo>
    <msub>
        <mi>s</mi>
        <mi>2</mi>
    </msub>
    <mo>)</mo>
    <mo>&times;</mo>
    <msub>
        <mi>s</mi>
        <mi>3</mi>
    </msub>
    <mo>=</mo>
    <msub>
        <mi>s</mi>
        <mi>1</mi>
    </msub>
    <mo>&times;</mo>
    <mo>(</mo>
    <msub>
        <mi>s</mi>
        <mi>2</mi>
    </msub>
    <mo>&times;</mo>
    <msub>
        <mi>s</mi>
        <mi>3</mi>
    </msub>
    <mo>)</mo>
</math>

Эта бинарная операция может быть точной верхней гранью или точной нижней гранью полурешетки.

На аналогичных математических структурах строятся системы контроля версий (*git*, *svn*). Множество состояний в них имеет общего предка, на данном множестве определен частный порядок, и при этом состояния могут быть объединены.